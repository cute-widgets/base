@use '@angular/cdk';

.cute-menu {
  display: none;
}

.cute-menu-panel {
  //--cute-menu-container-shape: 4px;
  min-width: 112px;
  max-width: 280px;
  overflow: hidden;

  box-sizing: border-box;
  outline: 0;
  animation: _cute-menu-enter 120ms cubic-bezier(0, 0, 0.2, 1);
  //border-radius: var(--cute-menu-container-shape);
  //background-color: var(--cute-menu-container-color);
  will-change: transform, opacity;

  &.cute-menu-panel-exit-animation {
    animation: _cute-menu-exit 100ms 25ms linear forwards;
  }

  &.cute-menu-panel-animations-disabled {
    animation: none;
  }

  // Prevent users from interacting with the panel while it's animating. Note that
  // people won't be able to click through it, because the overlay pane will catch the click.
  // This fixes the following issues:
  //  * Users accidentally opening sub-menus when the `overlapTrigger` option is enabled.
  //  * Users accidentally tapping on content inside the sub-menu on touch devices, if the
  //    sub-menu overlaps the trigger. The issue is due to touch devices emulating the
  //    `mouseenter` event by dispatching it on tap.
  &.cute-menu-panel-animating {
    pointer-events: none;

    // If the same menu is assigned to multiple triggers and the user moves quickly between them
    // (e.g. in a nested menu), the panel for the old menu may show up as empty while it's
    // animating away. Hide such cases since they can look off to users.
    &:has(.cute-menu-content:empty) {
      display: none;
    }
  }

  @include cdk.high-contrast {
    outline: solid 1px;
  }

  .cute-menu-content {
    display: block;
    width: 100%;
    padding: 0.5rem 0;
    font-size: 1rem;
    color: var(--bs-body-color);
    text-align: start;
    list-style: none;
    background-color: var(--bs-body-bg);
    border: var(--bs-border-width) solid var(--bs-border-color-translucent);
    border-radius: var(--bs-border-radius);

    // menu item delimiter
    & [role='separator'] {
      margin: 0.5rem 0 !important;
      max-height: 1px;
    }
  }
}

@keyframes _cute-menu-enter {
  from {
    opacity: 0;
    transform: scale(0.8);
  }

  to {
    opacity: 1;
    transform: none;
  }
}

@keyframes _cute-menu-exit {
  from {
    opacity: 1;
  }

  to {
    opacity: 0;
  }
}
